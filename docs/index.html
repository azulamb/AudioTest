<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title></title>
  <style>#play::before{content:"Play";}#play.nowplay::before{content:"Stop";}</style>
<script>
  const URL = 'frog_song_German_Polka.m4a';
  document.addEventListener('DOMContentLoaded',() => {
    const audio = document.getElementById( 'audio' );
    //audio.src = URL;
    fetch( URL ).then( ( r ) => { return r.blob(); } ).then( ( blob ) => {
      const file = new File( [ blob ], 'test.m4a', { type: 'audio/mp4' } );
      audio.src = URL.createObjectURL( file, { type: file.mime } );
    } );
    const button = document.getElementById( 'play' );
    button.addEventListener( 'click', () => {
      const nowplay = button.classList.contains( 'nowplay' );
      if ( nowplay ) {
        button.classList.remove( 'nowplay' );
      } else {
        button.classList.add( 'nowplay' );
      }
      audio.load();
      setTimeout( () => {
        if ( nowplay ) {
          audio.pause();
        } else {
          audio.play();
        }
      }, 1000 );
    } );
  } );
</script>
</head>
<body>
  <p>Audio関連のテスト。サンプルは http://www.mu-tech.co.jp/Ringtone/frog_song.asp から</p>
  <button id="play"></button>
  <audio id="audio"></audio>
  <div>v4</div>
</body>
</html>
